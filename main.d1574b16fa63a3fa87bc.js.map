{"version":3,"sources":["webpack:///./js/refs.js","webpack:///./js/parseLocalSrorage.js","webpack:///./index.js","webpack:///./js/notifications.js"],"names":["form","document","querySelector","submitButton","table","select","confirmDeletingBtn","parseLocalSrorage","values","key","localStorage","hasOwnProperty","length","value","JSON","parse","getItem","push","changeRadio","refs","elements","teammate","forEach","t","disabled","addBasicMarkup","name","time","day","markup","tableCell","innerHTML","insertAdjacentHTML","classList","add","addAllMarkup","meetingName","meetingDay","meetingTime","addEventListener","event","formElement","newEvent","meeting","teammateList","team","c","checked","newMeeting","meetingMembers","find","error","text","delay","preventDefault","setItem","uuidv4","stringify","target","includes","remove","nodeName","parent","parentNode","dataset","removeItem"],"mappings":"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","file":"main.d1574b16fa63a3fa87bc.js","sourcesContent":["export default {\r\n  form: document.querySelector('.js-form'),\r\n  submitButton: document.querySelector('.button-submit'),\r\n  table: document.querySelector('table'),\r\n  select: document.querySelector('.filter-teammate'),\r\n  confirmDeletingBtn: document.querySelector('#confirm-deleting-event'),\r\n};\r\n","export default function parseLocalSrorage() {\r\n  const values = [];\r\n  for (let key in localStorage) {\r\n    if (!localStorage.hasOwnProperty(key) || key.length !== 36) {\r\n      continue;\r\n    }\r\n    const value = JSON.parse(localStorage.getItem(key));\r\n    values.push(value);\r\n  }\r\n  return values;\r\n}\r\n","import './sass/styles.scss';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport timeSlotIsBookedError from './js/notifications';\r\nimport refs from './js/refs';\r\nimport parseLocalSrorage from './js/parseLocalSrorage';\r\n\r\naddAllMarkup();\r\n\r\nif (refs.form) {\r\n  refs.submitButton.addEventListener('click', submitForm);\r\n  refs.form.querySelector('#radio1').addEventListener('change', changeRadio);\r\n  refs.form.querySelector('#radio2').addEventListener('change', changeRadio);\r\n}\r\n\r\nif (refs.table) {\r\n  refs.select.addEventListener('change', filterByTeammate);\r\n  refs.table.addEventListener('click', deleteMeeting);\r\n}\r\n\r\nfunction submitForm(event) {\r\n  const formElement = refs.form.elements;\r\n  const newEvent = formElement.meeting.value;\r\n  const day = formElement.day.value;\r\n  const time = formElement.time.value;\r\n  const teammateList = [];\r\n  if (formElement.team.value === 'all-members') {\r\n    teammateList.push(formElement.team.value);\r\n  } else {\r\n    formElement.teammate.forEach(c => {\r\n      if (c.checked) {\r\n        teammateList.push(c.value);\r\n      }\r\n    });\r\n  }\r\n  const newMeeting = {\r\n    meetingName: newEvent,\r\n    meetingDay: day,\r\n    meetingTime: time,\r\n    meetingMembers: teammateList,\r\n  };\r\n  const findCoincidence = parseLocalSrorage().find(\r\n    ({ meetingDay, meetingTime }) => meetingDay === day && meetingTime === time,\r\n  );\r\n  if (findCoincidence) {\r\n    timeSlotIsBookedError();\r\n    event.preventDefault();\r\n  } else {\r\n    localStorage.setItem(uuidv4(), JSON.stringify(newMeeting));\r\n  }\r\n}\r\n\r\nfunction changeRadio() {\r\n  refs.form.elements.teammate.forEach(t => (t.disabled = !t.disabled));\r\n}\r\n\r\nfunction addBasicMarkup(name, time, day) {\r\n  const markup = `<span>${name}</span><button class=\"btn-close\" type=\"button\" data-toggle=\"modal\" data-target=\"#myModal\"></button>`;\r\n  const tableCell = refs.table.querySelector(\r\n    `[data-time='${time}'] > [data-day=\"${day}\"]`,\r\n  );\r\n  tableCell.innerHTML = '';\r\n  tableCell.insertAdjacentHTML('beforeend', markup);\r\n  tableCell.classList.add('active-event');\r\n}\r\n\r\nfunction addAllMarkup() {\r\n  parseLocalSrorage().forEach(({ meetingName, meetingDay, meetingTime }) => {\r\n    if (refs.table) {\r\n      addBasicMarkup(meetingName, meetingTime, meetingDay);\r\n    }\r\n  });\r\n}\r\n\r\nfunction filterByTeammate(event) {\r\n  if (event.target.value === 'all-members') {\r\n    addAllMarkup();\r\n    return;\r\n  }\r\n  parseLocalSrorage().forEach(\r\n    ({ meetingMembers, meetingName, meetingDay, meetingTime }) => {\r\n      if (\r\n        meetingMembers.includes(event.target.value) ||\r\n        meetingMembers.includes('all-members')\r\n      ) {\r\n        addBasicMarkup(meetingName, meetingTime, meetingDay);\r\n      } else {\r\n        const tableCell = refs.table.querySelector(\r\n          `[data-time='${meetingTime}'] > [data-day=\"${meetingDay}\"]`,\r\n        );\r\n        tableCell.innerHTML = '';\r\n        tableCell.classList.remove('active-event');\r\n      }\r\n    },\r\n  );\r\n}\r\n\r\nfunction deleteMeeting(event) {\r\n  if (event.target.nodeName !== 'BUTTON') {\r\n    return;\r\n  }\r\n  const parent = event.target.parentNode;\r\n  const day = parent.dataset.day;\r\n  const time = parent.parentNode.dataset.time;\r\n  const tableCell = refs.table.querySelector(\r\n    `[data-time='${time}'] > [data-day=\"${day}\"]`,\r\n  );\r\n\r\n  refs.confirmDeletingBtn.addEventListener('click', () => {\r\n    for (let key in localStorage) {\r\n      if (!localStorage.hasOwnProperty(key) || key.length !== 36) {\r\n        continue;\r\n      }\r\n      const value = JSON.parse(localStorage.getItem(key));\r\n      if (value.meetingDay === day && value.meetingTime === time) {\r\n        localStorage.removeItem(key);\r\n        break;\r\n      }\r\n    }\r\n    tableCell.innerHTML = '';\r\n    tableCell.classList.remove('active-event');\r\n  });\r\n}\r\n","import { error } from '@pnotify/core/dist/PNotify.js';\r\nimport '@pnotify/core/dist/PNotify.css';\r\nimport '@pnotify/core/dist/BrightTheme.css';\r\n\r\nexport default function timeSlotIsBookedError() {\r\n  error({\r\n    text: 'Failed to create an event. Time slot is already booked.',\r\n    delay: 3000,\r\n  });\r\n}\r\n"],"sourceRoot":""}