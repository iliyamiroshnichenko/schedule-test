{"version":3,"sources":["webpack:///./js/refs.js","webpack:///./index.js","webpack:///./js/notifications.js"],"names":["form","document","querySelector","submitButton","table","select","confirmDeletingBtn","changeRadio","refs","elements","teammate","forEach","t","disabled","parseLocalSrorage","values","key","localStorage","hasOwnProperty","length","value","JSON","parse","getItem","push","addAllMarkup","meetingName","meetingDay","meetingTime","markup","tableCell","innerHTML","insertAdjacentHTML","classList","add","addEventListener","event","formElement","newEvent","meeting","day","time","teammateList","team","c","checked","newMeeting","meetingMembers","err","error","text","delay","preventDefault","setItem","uuidv4","stringify","target","includes","remove","nodeName","parent","parentNode","dataset","removeItem"],"mappings":"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","file":"main.888523af714ee14bd65e.js","sourcesContent":["export default {\r\n  form: document.querySelector('.js-form'),\r\n  submitButton: document.querySelector('.button-submit'),\r\n  table: document.querySelector('table'),\r\n  select: document.querySelector('.filter-teammate'),\r\n  confirmDeletingBtn: document.querySelector('#confirm-deleting-event'),\r\n};\r\n","import './sass/styles.scss';\r\nimport refs from './js/refs';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport timeSlotIsBookedError from './js/notifications';\r\n\r\naddAllMarkup();\r\n\r\nif (refs.form) {\r\n  refs.submitButton.addEventListener('click', submitForm);\r\n  refs.form.querySelector('#radio1').addEventListener('change', changeRadio);\r\n  refs.form.querySelector('#radio2').addEventListener('change', changeRadio);\r\n}\r\n\r\nif (refs.table) {\r\n  refs.select.addEventListener('change', filterByTeammate);\r\n  refs.table.addEventListener('click', deleteMeeting);\r\n}\r\n\r\nfunction submitForm(event) {\r\n  const formElement = refs.form.elements;\r\n  const newEvent = formElement.meeting.value;\r\n  const day = formElement.day.value;\r\n  const time = formElement.time.value;\r\n  const teammateList = [];\r\n  if (formElement.team.value === 'all-members') {\r\n    teammateList.push(formElement.team.value);\r\n  } else {\r\n    formElement.teammate.forEach(c => {\r\n      if (c.checked) {\r\n        teammateList.push(c.value);\r\n      }\r\n    });\r\n  }\r\n  const newMeeting = {\r\n    meetingName: newEvent,\r\n    meetingDay: day,\r\n    meetingTime: time,\r\n    meetingMembers: teammateList,\r\n  };\r\n  let err = false;\r\n  parseLocalSrorage().forEach(({ meetingDay, meetingTime }) => {\r\n    if (meetingDay === day && meetingTime === time) {\r\n      timeSlotIsBookedError();\r\n      err = true;\r\n      event.preventDefault();\r\n    }\r\n    return;\r\n  });\r\n  if (!err) localStorage.setItem(uuidv4(), JSON.stringify(newMeeting));\r\n}\r\n\r\nfunction changeRadio() {\r\n  refs.form.elements.teammate.forEach(t => (t.disabled = !t.disabled));\r\n}\r\n\r\nfunction parseLocalSrorage() {\r\n  const values = [];\r\n  for (let key in localStorage) {\r\n    if (!localStorage.hasOwnProperty(key) || key.length !== 36) {\r\n      continue;\r\n    }\r\n    const value = JSON.parse(localStorage.getItem(key));\r\n    values.push(value);\r\n  }\r\n  return values;\r\n}\r\n\r\nfunction addAllMarkup() {\r\n  parseLocalSrorage().forEach(({ meetingName, meetingDay, meetingTime }) => {\r\n    if (refs.table) {\r\n      const markup = `<span>${meetingName}</span><button class=\"btn-close\" type=\"button\" data-toggle=\"modal\" data-target=\"#myModal\"></button>`;\r\n      const tableCell = refs.table.querySelector(\r\n        `[data-time='${meetingTime}'] > [data-day=\"${meetingDay}\"]`,\r\n      );\r\n      tableCell.innerHTML = '';\r\n      tableCell.insertAdjacentHTML('beforeend', markup);\r\n      tableCell.classList.add('active-event');\r\n    }\r\n  });\r\n}\r\n\r\nfunction filterByTeammate(event) {\r\n  if (event.target.value === 'all-members') {\r\n    addAllMarkup();\r\n    return;\r\n  }\r\n  parseLocalSrorage().forEach(\r\n    ({ meetingMembers, meetingName, meetingDay, meetingTime }) => {\r\n      if (\r\n        meetingMembers.includes(event.target.value) ||\r\n        meetingMembers.includes('all-members')\r\n      ) {\r\n        const markup = `<span>${meetingName}</span><button class=\"btn-close\" type=\"button\" data-toggle=\"modal\" data-target=\"#myModal\"></button>`;\r\n        const tableCell = refs.table.querySelector(\r\n          `[data-time='${meetingTime}'] > [data-day=\"${meetingDay}\"]`,\r\n        );\r\n        tableCell.innerHTML = '';\r\n        tableCell.insertAdjacentHTML('beforeend', markup);\r\n        tableCell.classList.add('active-event');\r\n      } else {\r\n        const tableCell = refs.table.querySelector(\r\n          `[data-time='${meetingTime}'] > [data-day=\"${meetingDay}\"]`,\r\n        );\r\n        tableCell.innerHTML = '';\r\n        tableCell.classList.remove('active-event');\r\n      }\r\n    },\r\n  );\r\n}\r\n\r\nfunction deleteMeeting(event) {\r\n  if (event.target.nodeName !== 'BUTTON') {\r\n    return;\r\n  }\r\n  const parent = event.target.parentNode;\r\n  const day = parent.dataset.day;\r\n  const time = parent.parentNode.dataset.time;\r\n  const tableCell = refs.table.querySelector(\r\n    `[data-time='${time}'] > [data-day=\"${day}\"]`,\r\n  );\r\n\r\n  refs.confirmDeletingBtn.addEventListener('click', () => {\r\n    for (let key in localStorage) {\r\n      if (!localStorage.hasOwnProperty(key) || key.length !== 36) {\r\n        continue;\r\n      }\r\n      const value = JSON.parse(localStorage.getItem(key));\r\n      if (value.meetingDay === day && value.meetingTime === time) {\r\n        localStorage.removeItem(key);\r\n        break;\r\n      }\r\n    }\r\n    tableCell.innerHTML = '';\r\n    tableCell.classList.remove('active-event');\r\n  });\r\n}\r\n","import { error } from '@pnotify/core/dist/PNotify.js';\r\nimport '@pnotify/core/dist/PNotify.css';\r\nimport '@pnotify/core/dist/BrightTheme.css';\r\n\r\nexport default function timeSlotIsBookedError() {\r\n  error({\r\n    text: 'Failed to create an event. Time slot is already booked.',\r\n    delay: 3000,\r\n  });\r\n}\r\n"],"sourceRoot":""}